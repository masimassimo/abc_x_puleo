<odoo>
    
    <!-- Template del report PDF della fattura immediata/differita di Puleo. -->
    
    <template id="preventivo_e_ordine_puleo_template_puleo">
        <t t-call="web.basic_layout">
            <t t-set="doc" t-value="doc.with_context(lang=doc.partner_id.lang)"/>

                      <style type="text/css">
       
                    .small-font {
                                    font-size:80%;
                                }
                    .smaller-font {
                                    font-size:50%;
                                }
                    .bold-font {
                                    font-weight:bold
                                    }
                    .rounded-tl {
                                    border-top-left-radius: 5px
                                }
                    .rounded-tr {
                                    border-top-right-radius: 5px
                                }
                    .rounded-bl {
                                    border-bottom-left-radius: 5px;
                                }
                    .rounded-br {
                                    border-bottom-right-radius: 5px
                    
                    .full-width {   
                                    width:100%
                                    margin-left:auto;
                                    margin-right:auto;
                                }
                    
                    
        
                                

            </style>
                <!-- Div che contiene le INFO dell'Azienda e del Cliente -->
         
                <div t-attf-class="header o_company_#{doc.company_id.id}_layout" t-att-style="report_header_style">
                <div class="row address mb-1 small-font">
                
                    <div class="col-5">
                         <t t-if="image_data_uri(doc.team_id.x_avatar_image)">
                        <div>
                            <img class="img-fluid" t-att-src="image_data_uri(doc.team_id.x_avatar_image)" style="max-width:250px"/>
                        </div>
                        </t>
                        <t t-else="">
                            <div>
                                <img class="img-fluid" t-att-src="image_data_uri(doc.company_id.logo)" style="max-width:250px"/>
                            </div>
                        </t>
                    </div>
                    

                    <div class="col-3" style="text-align:right;">
                        <div style="font-weight: bold; font-size:100%;" t-field="doc.company_id.partner_id"/>
                        <div>
                            <ul class="list-inline" style="font-size:80%;">
                                <li t-if="doc.company_id.city and doc.company_id.zip and doc.company_id.state_id and doc.company_id.country_id"> <span t-field="doc.company_id.zip"/> <span t-field="doc.company_id.city"/> <span t-field="doc.company_id.state_id.code"/> / <span style="color:red; text-transform: uppercase;" t-field="doc.company_id.country_id"/>  </li>
                                <li t-if="doc.company_id.street"> <span t-field="doc.company_id.street"/> </li>
                                <li t-if="doc.company_id.street2"> <span t-field="doc.company_id.street2"/> </li>
                                <li t-if="doc.company_id.phone"> Tel <span t-field="doc.company_id.phone"/> </li>
                                <li> Fax <span> +39 0923968920 </span> </li>

                            </ul>
                        </div>
                    </div>
                  
                    
                    <div class="col-4">
                        <div class="border-left">
                        <ul class="ml-1 list-inline" style="font-size:80%;">
                            <li> <span>P.IVA/C.F./REG.I. 01233360815</span> </li>
                            <li> <span>Cap. Soc. Int. vers. € 1.500.000.00</span> </li>
                            <li t-if="doc.company_id.website"> <span t-field="doc.company_id.website"/> </li>
                            <li t-if="doc.company_id.email"> <span t-field="doc.company_id.email"/> </li>
                            <li> <span>service@puleoitalia.com</span> </li>
                            <li> <span>puleospa@legalmail.it</span> </li>
                        </ul>
                        </div>
                    </div>
                    </div>
                </div>

    <div class="row address mb-3 small-font">
    <div class="col-6">
          <table class="table table-bordered">
              <thead>
                  <tr scope="row">
                    <th scope="col" class="p-1 align-top text-left small-font col-6" style="width:50%">
                        <span>Documento</span>
                    </th>
                    <th scope="col" class="p-1 align-top text-center small-font col-2" style="width:16.66%">
                        <span>Numero</span>
                    </th>
                    <th scope="col" class="p-1 align-top text-center small-font col-2" style="width:16.66%">
                        <span>Data</span>
                    </th>
                    <th scope="col" class="p-1 align-top text-center small-font col-2" style="width:16.66%">
                        <span>Pagina</span>
                    </th>
                    </tr>
                </thead>
                <tbody>
                    <tr scope="row">
                        <td class="p-1 align-top text-left small-font col-6" style="width:50%">
                            <t t-if="not (env.context.get('proforma', False) or is_pro_forma)">
                            <span style="font-weight:bold;" t-if="doc.state not in ['draft','sent']">Ordine</span>
                            <span style="font-weight:bold;" t-if="doc.state in ['draft','sent']">Preventivo</span>
                        </t>
                        <t style="font-weight:bold;" t-if="env.context.get('proforma', False) or is_pro_forma">
                            <span>Fattura Pro-forma</span>
                        </t>
                        </td>
                        <td class="p-1 align-middle text-center small-font col-2" style="width:16.66%">
                            <span t-field="doc.name"/>
                        </td>
                        <td class="p-1 align-middle text-center small-font col-2" style="width:16.66%">
                            <span t-if="doc.date_order" t-esc="doc.date_order.strftime('%d/%m/%Y')"/> 
                 
                        </td>
                        <td class="p-1 align-middle text-center small-font col-2" style="width:16.66%">
                           <!-- Page -->
                           
                           


                        </td>
                    </tr>
                </tbody>
                <thead>
                    <tr scope="row">
                        <th scope="col" colspan="2" class="p-1 align-top text-left small-font col-6" style="width:50%">
                            <span>Partita IVA</span>
                        </th>
                        <th scope="col" colspan="2" class="p-1 align-top text-left small-font col-6" style="width:50%">
                            <span>Codice Fiscale</span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <td colspan="2" class="p-1 align-middle text-left small-font col-6" style="width:50%">
                        <span t-field="doc.partner_id.vat"/>
                    </td>
                      <td colspan="2" class="p-1 align-middle text-left small-font col-6" style="width:50%">
                        <span t-field="doc.partner_id.fiscalcode"/>
                    </td>
                </tbody>
                <thead>
                     <tr scope="row">
                        <th colspan="4" scope="col" class="p-1 align-top text-left small-font col-12" style="width:100%">
                            <span>Rif. Interno</span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <td colspan="4" class="p-1 align-middle text-left small-font col-12" style="width:100%">
                        <span t-field="doc.user_id"/>
                    </td>
                  
                    
                </tbody>
                
                <thead>
                     <tr scope="row">
                        <th scope="col" colspan="2" class="p-1 align-top text-left small-font col-9" style="width:66.66%">
                            <span>Pagamento</span>
                        </th>
                        <th scope="col" colspan="2" class="p-1 align-top text-left small-font col-3" style="width:33.33%">
                            <span>Rif. Ordine Cliente</span>
                        </th>
      
                    </tr>
                </thead>
                
                <tbody>
                    <td colspan="2" class="p-1 align-middle text-left small-font col-9" style="width:66.66%">
                                <t t-if="doc.payment_term_id">
                                     <span t-field="doc.payment_term_id.name"/>
                                </t>
                             
                                <!--
                                <t t-else="">
                                    <span t-field="o.invoice_date_due" options="{&quot;widget&quot;: &quot;date&quot;}"/>
                                </t>
                                -->
                                                
                    </td>
                     <td colspan="2" class="p-1 align-middle text-left small-font col-3" style="width:33.33%">
                        <!--
                        <span t-field="o.invoice_origin"/> - <t t-if="o.invoice_line_ids.sale_line_ids.order_id.date_order" t-esc="o.invoice_line_ids.sale_line_ids.order_id.date_order.strftime('%d/%m/%Y')"/> 
                        -->
                        <br/>
                    </td>
                
                    
                </tbody>
                
                <thead>
                     <tr scope="row">
                        <th scope="col" colspan="4" class="p-1 align-top text-left small-font col-12" style="width:100%">
                            <span>Banca d'Appoggio </span>
                        </th>
                 
      
                    </tr>
                </thead>
                <tbody>
                      <td colspan="4" class="p-1 align-middle text-left small-font col-12" style="width:100%">
                            <t t-if="doc.banca_cliente">
                       <span t-esc="doc.banca_cliente.bank_id.name"/>
                       <div>
                       IBAN: <span t-esc="doc.banca_cliente.acc_number"></span>
                       BIC: <span t-esc="doc.banca_cliente.bank_id.bic"></span>
                       </div>
                          </t>
                          <t t-else="">
                              <br/>
                          </t>
                    </td>
                
                </tbody>
                
                
                 <thead>
                     <tr scope="row">
                        <th scope="col" colspan="4" class="p-1 align-top text-left small-font col-12" style="width:100%">
                            <span>Banca </span>
                        </th>
                 
      
                    </tr>
                </thead>
                <tbody>
                      <td colspan="4" class="p-1 align-middle text-left small-font col-12" style="width:100%">
                          <t t-if="doc.banca">
                       <span t-field="doc.banca"/>
                          </t>
                          <t t-else="">
                              <br/>
                          </t>
                    </td>
                
                </tbody>
                
                
          </table>
    </div>
    
     <div class="col-6">
         <table class="table table-bordered">
             <thead>
                 
             
       
        </thead>
        <tbody>
            
       <td>
           <!-- Codice vecchio 
        <span>Spett.le</span>
        <t t-set="address">
                    
          
        
       </t>
           
        
                         
            <t t-if="doc.partner_shipping_id and (doc.partner_shipping_id.id != doc.partner_id.id)">
                
                <t t-set="information_block">
                    <div groups="sale.group_delivery_invoice_address" name="shipping_address_block">
                        <strong>Shipping Address:</strong>
                        <div t-field="o.partner_shipping_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: True}"/>
                    </div>
                </t>
            </t>
            <div t-field="o.partner_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: True}" groups="sale.group_delivery_invoice_address"/>
        <address t-field="o.partner_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: True}" groups="!sale.group_delivery_invoice_address"/>
           
            Fine codice vecchio -->
           
            <span style="margin-bottom:0px;">Spett.le</span>
                    <div>
                        <span t-field="doc.partner_id"/>
                    </div>
                    <span t-field="doc.partner_id.street" style=""/>
                    <div style="">
                        <span t-field="doc.partner_id.zip"/>
                        <span t-field="doc.partner_id.city"/>
                        <span t-field="doc.partner_id.state_id"/> 
                    </div>

                <div style="margin-top:10px;  line-height:100%">
                    <strong t-if="doc.partner_shipping_id == doc.partner_id" style="">Indirizzo di Fatturazione e Spedizione:</strong>
                    <strong t-if="doc.partner_shipping_id != doc.partner_id" style="">Indirizzo di Fatturazione:</strong>
                    <div style="" t-field="doc.partner_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;], &quot;no_marker&quot;: True}"/>
                    <br/>
                    <t t-if="doc.partner_shipping_id != doc.partner_id">
                        <strong style="">Indirizzo di Spedizione:</strong>
                        <div style="" t-field="doc.partner_shipping_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;], &quot;no_marker&quot;: True}"/>
                    </t>
               </div>
           
         
        </td>
         </tbody>
         <thead>
             <tr scope="row">
            <th scope="col" class="p-1 align-top text-left small-font col-12" style="width:100%">
             Nominativo di riferimento 
             </th>
             </tr>
         </thead>
          <tbody>
            <tr scope="row">
             <td class="p-1 align-middle text-left small-font col-12" style="width:100%">
                 <t t-if="doc.nominativo_di_riferimento">
                 <span t-field="doc.nominativo_di_riferimento.name"/> - <span t-field="doc.nominativo_di_riferimento.mobile"/>
                 </t>
                 <t t-else="">
                     <br/>
                 </t>
                </td>
            </tr>
        </tbody>
         
    </table>
  
        
    
        
     </div>
     
    </div>  
    
<div class="page">
    

    <!-- Tabella Prodotti -->
    
    <table class="table table-bordered mt-1">
                <thead>
                        <tr scope="row">
                            <th scope="col" class="p-1 align-middle text-center smaller-font col-1" style="width:8.33%">
                                <span>Codice</span>
                            </th>
                            <th scope="col" class="p-1 align-middle text-center smaller-font col-4" style="width:51.65%">
                                <span>Descrizione</span>
                            </th>
                            <th scope="col" class="p-1 align-middle text-center smaller-font col-1" style="width:4%">
                                <span>UM</span>
                            </th>
                            <th scope="col" class="p-1 align-middle text-center smaller-font col-1" style="width:8%">
                                <span>Quantitò</span>
                            </th>
                            <th scope="col" class="p-1 align-middle text-center smaller-font col-1" style="width:8%">
                                <span>Prezzo Un,</span>
                            </th>
                            <th scope="col" class="p-1 align-middle text-center smaller-font col-1" style="width:6%">
                                <span>Sconto %</span>
                            </th>
                            <th scope="col" class="p-1 align-middle text-center smaller-font col-1" style="width:8.33%">
                                <span>Importo</span>
                            </th>
                            <th scope="col" class="p-1 align-middle text-center smaller-font col-1" style="width:4%">
                                <span>IVA</span>
                            </th>
                        </tr> 
                         <tbody>
                        <t t-set="current_subtotal" t-value="0"/>
                        <t t-set="current_line" t-value="0"/>
                        <t t-set="totale_merce" t-value="0"/>
                        <t t-set="totale_netto" t-value="0"/>
                        <t t-set="totale_sconto" t-value="0"/>
                        <t t-set="down_payment" t-value="0"/>
                        <t t-set="lines" t-value="doc.order_line"/>
                        <t t-foreach="lines" t-as="line">

                            <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                            <t t-set="current_subtotal" t-value="current_subtotal + line.price_total" groups="account.group_show_line_subtotals_tax_included"/>
                            <t t-if="not line.display_type">
                                <t t-set="current_line" t-value="current_line + 1"/>
                                <tr scope="row">

                                    <td class="p-1 align-middle text-center smaller-font col-1" style="width:8.33%">
                                        <span t-field="line.product_id.id"/>
                                    </td>


                                    <td class="p-1 align-middle text-left smaller-font col-4" style="width:51.65%">
                                        
                                
                                    
                                                <span t-raw="line.name"/>
                                                <t t-if="not line.product_id">
                                                    <span t-raw="line.name"/>
                                                </t>
                                           
                                            <t t-if="doc.partner_id.country_id.id != 109 and line.product_id.codice_merce">
                                            
                                                <span>Nomenclatura combinata: <t t-esc="line.product_id.codice_merce"/> </span>
                                            </t>
                                     
                                    </td>

                                    <td class="p-1 align-middle text-center smaller-font col-1" style="width:4%">
                                        <span t-field="line.product_uom"/>
                                    </td>
                                    <td class="p-1 align-middle text-center smaller-font col-1" style="width:8%">
                                        <span t-field="line.product_uom_qty"/>
                                    </td>
                                    <td class="p-1 align-middle text-center smaller-font col-1" style="width:8%">
                                        <span t-field="line.price_unit"/>
                                        <t t-set="totale_merce" t-value="totale_merce + (line.price_unit*line.product_uom_qty)"/>
                                    </td>
                                    <td class="p-1 align-middle text-center smaller-font col-1" style="width:6%">
                                        <span t-field="line.discount"/>
                                       <t t-set="totale_sconto" t-value="totale_sconto + (line.price_unit*line.product_uom_qty*line.discount/100)"/>
                                    </td>
                                    <td class="p-1 align-middle text-center smaller-font col-1" style="width:8.33%">
                                        <span t-field="line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                                        <t t-set="totale_netto" t-value="totale_netto + line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                                        <span t-field="line.price_total" groups="account.group_show_line_subtotals_tax_included"/>
                                        <t t-set="totale_netto" t-value="totale_netto + line.price_total" groups="account.group_show_line_subtotals_tax_included"/>
                                    </td>
                                    <td class="p-1 align-middle text-center smaller-font col-1" style="width:4%">
                                        <t t-foreach="line.tax_id" t-as="tax_line">
                                            <span t-field="tax_line.description"/>
                                        </t>
                                    </td>
                                </tr>   
                            </t>
                            <t t-else="">
                                <tr scope="row">
                                    <td colspan="10" class="p-1 align-middle text-left smaller-font col-12">
                                        <strong t-raw="line.name"/>
                                        
                                    </td>
                                </tr>
                            </t>
                        </t>
                    </tbody> 
                    </thead>
    </table>
    
     <table class="table table-bordered mt-1" >
         <thead>
             <tr scope="row">
                 <th scope="col" class="p-1 align-middle text-center smaller-font col-6" style="width:50%">
                    <span>Note</span>
                </th>
                 <th scope="col" class="p-1 align-middle text-center smaller-font col-2" style="width:12.5%">
                    <span>Totale Articoli</span>
                </th>
                  <th scope="col" class="p-1 align-middle text-center smaller-font col-2" style="width:12.5%">
                    <span>Totale Solo IVA</span>
                </th>
            
                  <th scope="col" class="p-1 align-middle text-center smaller-font col-2" style="width:12.5%">
                    <span>Totale Sconto Merce</span>
                </th>
                
                  <th class="p-1 align-middle text-center smaller-font col-2" style="width:12.5%">
                        <span>Spese Bolli</span>
                    </th>
                
            </tr>
         </thead>
        <tbody>
            <tr scope="row">
                  <td rowspan="2" class="p-1 align-middle text-left small-font col-6" style="width:50%">
                        <span t-field="doc.note"/>
                    </td>
                      <td class="p-1 align-middle text-right smaller-font col-2" style="width:12.5%">
                        <span t-esc="totale_merce" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.currency_id}"/>
                    </td>
                         <td class="p-1 align-middle text-center smaller-font col-2" style="width:12.5%">
                      <!-- SOlo Iva -->
                     
                          <span t-field="doc.amount_tax"/>
           
                    </td>
                
                         <td class="p-1 align-middle text-center smaller-font col-2" style="width:12.5%">
                        <span t-esc="totale_sconto" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.currency_id}"/>
                    </td>
                    
                    <!-- Spese Bolli -->
                    
                    <td class="p-1 align-middle text-right small-font col-2" style="width:12.5%">
                      
                    </td>
                    
                    
                    
                    
                </tr>
            
            
        </tbody>
            <table class="table table-bordered mt-1"  style="page-break-after: always;">
            <thead>
             <tr scope="row">
                 <th scope="col" class="p-1 align-middle text-center smaller-font col-2 " style="width:16.66%">
                    <span>Scadenza</span>
                </th>
                   <th scope="col" class="p-1 align-middle text-center smaller-font col-2" style="width:16.66%">
                    <span>Importo</span>
                </th>
                   <th scope="col" class="p-1 align-middle text-center smaller-font col-2 " style="width:16.66%">
                    <span>Tipo Pagamento</span>
                </th>
                <th scope="col" class="p-1 align-middle text-center smaller-font  " style="width:12.5%">
                    <span>Spese Trasporto</span>
                </th>
                <th scope="col" class="p-1 align-middle text-center smaller-font  " style="width:12.5%">
                    <span>Spese Imballo</span>
                </th>
                <th scope="col" class="p-1 align-middle text-center smaller-font " style="width:12.5%">
                    <span>Spese Varie</span>
                </th>
                <th scope="col" class="p-1 align-middle text-center smaller-font  " style="width:12.5%">
                    <span>Sconto</span>
                </th>
   
            </tr>
         </thead>
         <tbody>
             <tr scope="row">
                 
                      <t t-set="termini" t-value="doc.payment_term_id"/>
                      <t t-set="importo_pagamento" t-value="doc.amount_total"/>
                     
                      
                      <td rowspan="5" class="p-1  text-left smaller-font col-2" style="width:16.66%">
                          
                           <t t-foreach="termini.line_ids" t-as="scadenza">
                               
                               
                               
                                       
                             <t t-if="scadenza.day_of_the_month == 31">
                                    
                                        <t t-set="data" t-value="doc.date_order.strftime('%d/%m/%Y')"/>
                                 
                                <t t-set="mesi" t-value="int(scadenza.days/30)"/>
                               F.M
                                 <span t-if="doc.date_order" t-esc="(datetime.datetime.strptime(data, '%d/%m/%Y') + relativedelta(months=mesi)).strftime('%m/%Y')"/>
                            
                            </t>
                            <t t-if="scadenza.day_of_the_month==0 and scadenza.days==0">
                                    <span>Pagamento immediato</span>
                            </t>
                   <t t-if="scadenza.day_of_the_month != 31">
                                    
                                   <!-- <span t-field="scadenza.days"/> -->
                                    <t t-set="giorni" t-value="scadenza.days"/>
                       
                                    <t t-if="doc.date_order">
                                        <t t-set="data" t-value="doc.date_order.strftime('%d/%m/%Y')"/>
                       
                                    <span t-esc="(datetime.datetime.strptime(data, '%d/%m/%Y') + datetime.timedelta(days=giorni) ).strftime('%d/%m/%Y')"/>
                                  <!--  <span t-field="scadenza.option"/> -->
                            </t>
                    
                  
                               </t>
                        <br/>          
                        
                        </t>
                             
                        
                    </td>
                         <td rowspan="5" class="p-1 text-center smaller-font col-2" style="width:16.66%">
                            <t t-foreach="termini.line_ids" t-as="scadenza">
                          
                            <t t-if="scadenza.value=='percent'">
                                <span t-esc="scadenza.value_amount*doc.amount_total/100" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.currency_id}"/>
                            </t>
                            <t t-elif="scadenza.value=='fixed'"> 
                                <span t-esc="scadenza.value_amount" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.currency_id}"/>
                            </t>
                            <t t-else="">
                                <t t-esc="importo_pagamento" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.currency_id}"/>
                                
                            </t>
                            
                            
                            <t t-if="scadenza.value=='percent'">
                                <t t-set="importo_pagamento" t-value="importo_pagamento-scadenza.value_amount*doc.amount_total/100"/>
                            </t>
                            <t t-elif="scadenza.value=='fixed'">
                                <t t-set="importo_pagamento" t-value="importo_pagamento-scadenza.value_amount"/>
                            </t>
                            <t t-else=""> <t t-set="importo_pagamento" t-value="0"/>
                            
                            </t>
                            <br/>
                            
    
                            
                            </t>
                        
                        
                        
                        
                    </td>
                         <td rowspan="5" class="p-1  text-center smaller-font " style="width:16.66%">
                         <t t-foreach="termini.line_ids" t-as="scadenza">
                             <span t-esc="doc.payment_term_id.name"/>
                                <br/>
                             </t>
                          
                    </td>
                         <td class="p-1 align-middle text-right small-font " style="width:12.5%">
                        <!-- Spese Trasporto -->
                        <br/>
                    </td>
                            <td class="p-1 align-middle text-right small-font " style="width:12.5%">
                         <!-- Spese Imballo -->
                    </td>
                         <td class="p-1 align-middle text-right small-font " style="width:12.5%">
                        <!-- Spese Varie -->
                    </td>
                         <td class="p-1 align-middle text-right small-font " style="width:12.5%">
                        <!-- Sconto -->
                    </td>
                    
                </tr>
                        <tr scope="row">
                      <th class="p-1 align-middle text-center smaller-font" style="width:12.5%">
                        <span>Cod. IVA</span>
                    </th>
                         <th class="p-1 align-middle text-center smaller-font" style="width:12.5%">
                        <span>Imponibile</span>
                    </th>
                         <th class="p-1 align-middle text-center smaller-font" style="width:12.5%">
                        <span>Aliquota</span>
                    </th>
                             <th class="p-1 align-middle text-center smaller-font" style="width:12.5%">
                        <span>Imposte</span>
                    </th>
                </tr>
                <tr scope="row">
           
                      <td class="p-1  text-right smaller-font" style="width:12.5%">
                          <t t-value="[]" t-set="codiciIva"/>
                                <t t-value="[]" t-set="aliquoteIva"/>
                                <t t-set="lines" t-value="doc.order_line"/>
                                <t t-as="line" t-foreach="lines">
                                    <t t-if="line.tax_id.description and (line.tax_id.description not in codiciIva)">
                                        <t t-value="codiciIva.append(line.tax_id.description)" t-set="codiciIvaDummy"/>
                                    </t>
                                </t>
                                <t t-as="cIva" t-foreach="codiciIva">
                                    <t t-esc="cIva"/><br/>
                                </t> 
                        
                    </td>
                         <td class="p-1  text-right smaller-font" style="width:12.5%">
                        
                        <!-- Imponibile -->
                        
                                  <t t-value="[]" t-set="imposta"/>
                                <t t-value="[]" t-set="codiciIva"/>
                                <t t-set="lines" t-value="doc.order_line"/>
                                <t t-as="line" t-foreach="lines">
                                    <t t-if="line.tax_id.description and (line.tax_id.description not in codiciIva)">
                                        <t t-value="codiciIva.append(line.tax_id.description)" t-set="codiciIvaDummy"/>
                                    </t>
                                </t>
                                <t t-as="cIva" t-foreach="codiciIva">
                                    <t t-value="0" t-set="imponibile"/>
                                    <t t-value="0" t-set="imposta_temp"/>
                                    <t t-set="lines" t-value="doc.order_line"/>
                                    <t t-as="line" t-foreach="lines">
                                        <t t-if="line.tax_id.description == cIva">
                                            <t t-value="imponibile + line.price_subtotal" t-set="imponibile"/>
                                            <t t-value="imponibile*(line.tax_id.amount / 100) " t-set="imposta_temp"/>
                                        </t>
                                    </t>
                                    <t t-value="imposta.append(imposta_temp)" t-set="impostaDummy"/>
                                    <t t-esc="imponibile" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.currency_id}"/><br/>
                                </t>
                        
                        
                    </td>
                         <td class="p-1  text-right smaller-font " style="width:12.5%">
                             <!-- Aliquota -->
                                   <t t-value="[]" t-set="codiciIva"/>
                                <t t-value="[]" t-set="aliquoteIva"/>
                                <t t-set="lines" t-value="doc.order_line"/>
                                <t t-as="line" t-foreach="lines">
                                    <t t-if="line.tax_id.name and (line.tax_id.name not in codiciIva)">
                                        <t t-value="codiciIva.append(line.tax_id.name)" t-set="codiciIvaDummy"/>
                                    </t>
                                </t>
                                <t t-as="cIva" t-foreach="codiciIva">
                                    <t t-esc="cIva"/><br/>
                                </t> 
                    </td>
                         <td class="p-1 text-right smaller-font " style="width:12.5%">
                            
                            <!-- Imposte -->
                             <t t-as="impostaFor" t-foreach="imposta">
                                    <t t-esc="impostaFor" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.currency_id}"/><br/>
                                </t>
                    </td>
                   
                    
                </tr>
                            <tr scope="row">
                      <th class="p-1 align-middle text-center smaller-font" style="width:12.5%">
                        <span>Totale Imponibile</span>
                    </th>
                         <th class="p-1 align-middle text-center smaller-font" style="width:12.5%">
                        <span>Totale IVA</span>
                    </th>
                         <th class="p-1 align-middle text-center smaller-font" style="width:12.5%">
                        <span>Abbuoni IVA Omaggi</span>
                    </th>
                             <th class="p-1 align-middle text-center smaller-font" style="width:12.5%">
                        <span>Totale Documento</span>
                    </th>
                </tr>
                
                <tr scope="row">
           
                      <td class="p-1 align-middle text-right smaller-font" style="width:12.5%">
                        <span t-field="doc.amount_untaxed"/>
                        
                    </td>
                         <td class="p-1 align-middle text-right smaller-font" style="width:12.5%">
                       
                             
                          <span t-field="doc.amount_tax"/>
                        
                         
                    
                
                    
                       
                    </td>
                         <td class="p-1 align-middle text-right small-font " style="width:12.5%">
                         <!-- Abbuoni IVA Omaggi -->
                    </td>
                         <td class="p-1 align-middle text-right smaller-font " style="width:12.5%">
                         <t t-set="totale_documento" t-value="doc.amount_total"/>
                                <strong t-esc="totale_documento" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.currency_id}"/>
                    </td>
                   
                    
                </tr>
                
                
                <tr scope="row">
                    <th rowspan="2" colspan="3" class="p-1 align-middle text-center smaller-font" style="width:50%">
            <span>AVVISO IMPORTANTE: i Vs. dati anagrafici e la partita iva che appaiono sul presente documento saranno quelli che verranno utilizzati, salvo Vs. diversa precisazione, agli effetti dell' Art. 2 DPR 633/72.
Con questo avviso Ci consideriamo esonerati da qualsiasi responsabilità prevista dall' Art.41 DPR 633/72.</span>
                    </th>
                         <th class="p-1 align-middle text-center smaller-font" style="width:16.6%">
                        <span>Acconto</span>
                    </th>
                         <th rowspan="2" class="p-1 align-middle text-center smaller-font" style="width:16.6%">
                        <span>CONTRIBUTO CONAI ASSOLTO</span>
                    </th>
                             <th colspan="2" class="p-1 align-middle text-center smaller-font" style="width:16.6%">
                        <span>Importo da Pagare</span>
                    </th>
                </tr>
                
                     
                                <tr scope="row">
           
                 
                         <td class="p-1 align-middle text-right small-font" style="width:16.6%">
                        <!-- Acconto  -->
                    </td>
                      
                         <td colspan="2" class="p-1 align-middle text-right small-font " style="width:16.6%">
                                                <t t-set="totale_documento" t-value="doc.amount_total"/>
                                <strong t-esc="totale_documento" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.currency_id}"/>
                    </td>
                   
                    
                </tr>
                
                
            
         </tbody>
        </table>


    </table>   
    

<div class="small-font" >
        <t t-if="not (env.context.get('proforma', False) or is_pro_forma)">
        <t t-if="doc.state not in ['draft','sent']">
            
 
            <div>
                <span> CONFERMA D’ORDINE N. <t t-if="doc.name" t-esc="doc.name"> </t> DEL <t t-if="doc.date_order" t-esc="doc.date_order.strftime('%d/%m/%Y')"></t></span>
            </div>
            <br></br>
            <div style="font-weight:bold; text-decoration: underline" class="align-middle text-center">
                <span>“CONDIZIONI GENERALI DI VENDITA”</span>
            </div>
            <br></br>
            
            <div style="font-weight:bold;">
                <span>Con il termine “Macchina” si intende ogni prodotto costruito – commercializzato dalla venditrice e per “Approntamento” la merce resa disponibile per il ritiro presso il nostro Stabilimento.</span>
            </div>

            <!-- Articolo -->
            <br></br>
            <div style="font-weight:bold;">
                <span> Articolo 1</span>
            </div>
            <div>
                <span>Il Contratto di fornitura deve intendersi perfezionato dal momento in cui il venditore riceve dall’acquirente la formale Conferma dell’ordinativo firmata per accettazione e/o, qualora sia previsto un acconto all’ordine, dal momento della ricezione di tale acconto. Ogni aggiunta o variazione alla conferma non vincola il fornitore se non specificamente accettata per iscritto da questo.
</span>
            </div>
            
            <br></br>
            <div style="font-weight:bold;">
                <span> Articolo 2</span>
            </div>
            <div>
                <span>Eventuali modifiche dell’ordine successivamente al perfezionarsi del contratto, qualora vengono accettate dalla Puleo, comporteranno comunque la variazione del termine di “Approntamento” che verrà fissato insindacabilmente dal fornitore stesso, al quale spetterà anche il diritto di modificare il prezzo stabilito.</span>
            </div>
            
            <br></br>
            <div style="font-weight:bold;">
                <span> Articolo 3</span>
            </div>
            <div>
                <span>Qualora l’acquirente chieda di annullare l’ordine perfezionato, sarà tenuto a corrispondere, ove la Puleo intenda a suo insindacabile giudizio aderire all’annullamento, una somma a Titolo di Penale pari all’importo dell’anticipo versato o, nel caso non sia stato previsto dal contratto, una somma pari al 15% del valore della fornitura.</span>
            </div>
            
            
            <br></br>
            <div style="font-weight:bold;">
                <span> Articolo 4</span>
            </div>
            <div>
                <span>La consegna della merce si intende pattuita Franco Stabilimento Puleo anche in ipotesi di spedizioni Franco Destino, queste intendendosi fatte a rischio e pericolo dell’acquirente.
Il venditore comunicherà al committente senza obbligo di alcuna formalità il giorno in cui la fornitura sarà Approntata per la spedizione. Trascorsi 10 giorni da detta comunicazione, qualora la fornitura non sia ritirata, saranno addebitate all’acquirente le spese di giacenza nella misura del 2 % del valore della fornitura stessa al mese.
Resta inteso che in caso di espressa richiesta da parte dell’acquirente di tardare la data di consegna, le date di pagamento dovranno essere comunque rispettate secondo i termini di scadenza stabiliti in contratto.</span>
            </div>
            
            
            <br></br>
            <div style="font-weight:bold;">
                <span> Articolo 5</span>
            </div>
            <div>
                <span>L’eventuale indicazione dei termini di Approntamento deve intendersi approssimativa e non impegnativa per il venditore. Comunque i termini non decorreranno sin tanto che l’acquirente non avrà posto a disposizione del venditore gli elementi utili a far luogo dalla fornitura. In ogni caso di forza maggiore e più in particolare in caso di scioperi o di interruzione del lavoro nello stabilimento del fornitore o del sub fornitore, sinistri, disguidi, interruzione nei trasporti, divieti doganali, guerre, mancanza di documenti o indicazioni necessarie per l’esecuzione del contratto e in ogni altro caso in cui la prestazione è impossibile anche temporaneamente, il venditore si riserva la facoltà di recedere il contratto di fornitura o di prorogare il termine di consegna per un periodo di tempo congruo. Nell’ipotesi di recesso del fornitore, all’acquirente spetterà unicamente la restituzione delle somme anticipate, escluso qualsiasi risarcimento.</span>
            </div>
            
            
            <br></br>
            <div style="font-weight:bold;">
                <span> Articolo 6</span>
            </div>
            <div>
                <span>I termini di pagamento decorreranno dalla data di avviso di merce Pronta.</span>
            </div>
            
            
            <br></br>
            <div style="font-weight:bold;">
                <span> Articolo 7</span>
            </div>
            <div>
                <span>I pagamenti dovranno essere effettuati alla sede amministrativa del fornitore che viene considerata ad ogni effetto luogo di adempimento del contratto, indipendentemente dal rilascio o dall’emissione contestuale o successiva di effetti di qualsiasi genere pagabili altrove.
L’efficacia di pagamenti effettuati ad agenti o rappresentanti della Puleo, è subordinata a preventiva esplicita autorizzazione di questa.
</span>
            </div>
    
    
            <br></br>
            <div style="font-weight:bold;">
                <span> Articolo 8</span>
            </div>
            <div>
                <span>Qualora la fornitura non venga saldata alla consegna, la vendita si intende regolata dalle disposizioni di cui altri articoli 1523 e SEGG. del C.C. pertanto la merce oggetto del presente contratto rimane di proprietà della Puleo sin tanto che il relativo prezzo non sarà stato pagato integralmente. In caso di morosità dell’acquirente, la Puleo si riserva la facoltà di dichiararlo decaduto dai benefici del termine con conseguente obbligo per costui di rientro immediato ed integrale dal debito, od altrimenti potrà ritenere risolto il contratto di vendita trattenendo i ratei percetti a titolo di equo indennizzo per il risarcimento del danno.</span>
            </div>
            
                   <br></br>
            <div style="font-weight:bold;">
                <span> Articolo 9</span>
            </div>
            <div>
                <span>L’acquirente non avrà il diritto di sospendere o modificare in alcun modo i pagamenti, anche nel caso fosse insorta una contestazione tra le parti per qualsiasi motivo. L’acquirente che sospenda o ritardi i pagamenti sarà considerato ad ogni effetto inadempiente e decadrà dal diritto di qualsiasi reclamo, azione od eccezione in rapporto alla merce ricevuta.
</span>
            </div>
    
    
           <br></br>
            <div style="font-weight:bold;">
                <span> Articolo 10</span>
            </div>
            <div>
                <span>In caso di mancato o ritardato pagamento anche di una sola delle rate convenute, l’acquirente decadrà dal beneficio del termine e il fornitore avrà diritto a pretendere il totale pagamento del prezzo ancora dovuto. L’eventuale rinnovo di effetti non costituirà comunque novazione e il loro mancato pagamento alle nuove scadenze darà luogo ugualmente alla decadenza del beneficio del termine.</span>
            </div>
    
    
           <br></br>
            <div style="font-weight:bold;">
                <span> Articolo 11</span>
            </div>
            <div>
                <span>La garanzia dei macchinari forniti è di 12 mesi. Il termine inizierà a decorrere dal ricevimento da parte della Puleo del modulo di “RAPPORTO DI PRIMO AVVIAMENTO” compilato in ogni sua parte (rilasciato dal centro assistenza autorizzato), e della “SCHEDA DI GARANZIA” debitamente firmata dall’acquirente/utilizzatore (quest’ultima sarà inclusa nel manuale uso e manutenzione). La garanzia offerta dalla Puleo scadrà trascorsi 12 mesi dalla fatturazione anche se i macchinari forniti, per una qualsiasi ragione, non siano stati adoperati.
La garanzia sarà efficace solamente se il primo avviamento verrà effettuato da personale della Puleo o personale autorizzato dalla fornitrice. Il primo avviamento indipendente dalle previsioni contrattuali, andrà sempre domandato alla Puleo a mezzo fax o e-mail e questa vi provvederà entro 15 giorni dalla ricezione della richiesta. L’acquirente, rimossa ogni eccezione, riconosce espressamente alla Puleo il diritto di non eseguire il primo avviamento, qualora non risultino rispettati e adempiuti i pagamenti contrattualmente previsti e nel frattempo scaduti. L’efficacia della garanzia è altresì subordinata alla denuncia di vizi e difetti entro 8 giorni dalla loro scoperta. La denuncia dovrà pervenire alla Puleo a mezzo raccomandata con avviso di ricevimento e dovrà contenere la descrizione dell’inconveniente lamentato.
</span> <br></br> <br></br>
<span> In via di mero esempio, la garanzia deve considerarsi inefficace nei seguenti casi:</span>
<ul style="dashed">
    <li> Spirare del termine di durata; </li>
    <li> Primo avviamento effettuato da personale non autorizzato; </li>
    <li> Mancato rispetto dei termini di pagamento; </li>
    <li> Installazione dei macchinari in contrasto con le regole riportate nel manuale di installazione e sicurezza;</li>
    <li> Interventi di manutenzione compiuti senza l’osservanza delle modalità di cui al manuale di installazione e
sicurezza;</li>
    <li> Interventi di riparazione effettuati da personale non autorizzato;</li>
    <li> Modifiche ai macchinari non convenute con la Puleo;</li>
    <li> Utilizzo non corretto dei macchinari;</li>
    <li> Rotture ed inconvenienti dovute al normale uso o a eventi atmosferici;</li>
    <li> Mancata ottemperanza a qualunque altra procedura richiesta dalla Puleo per la validità della garanzia.</li>
</ul>
<span> La garanzia si intende limitata alla sostituzione del pezzo che sia stato accertato difettoso, alla manodopera necessaria a ciò. </span>
<br></br>
<span>Vengono escluse dalla Garanzia le parti elettriche/elettroniche danneggiate per uso improprio dell’apparecchiatura da parte del personale dell’Acquirente, o dovute a incostanza di erogazione della corrente elettrica di rete presso il sito produttivo l’Acquirente, o dovute a particolari agenti atmosferici.</span>
<br></br> <br></br>
<span>
Ogni altro onere è a carico dell’acquirente, ivi compreso i costi per eventuale sollevamento e/o movimentazione nonché i costi per rendere accessibile l’intervento di sostituzione in garanzia.
L’acquirente in ogni caso non ha titolo per richiedere il risarcimento dei danni scaturenti dall’eventuale fermo dell’impianto, rinunziando quindi a proporre qualsiasi voglia azione risarcitoria che ne fosse conseguenza diretta o indiretta.</span>
            </div>
    
    
           <br></br>
            <div style="font-weight:bold;">
                <span> Articolo 11 bis</span>
            </div>
            <div>
                <span>Per le unità installate all’estero, la garanzia è limitata alla sostituzione del pezzo dichiarato difettoso, con la fornitura del pezzo nuovo Franco sede dell’acquirente. La spedizione del pezzo difettoso sarà a carico del venditore.
Una volta ricevuto il pezzo dichiarato difettoso, il Venditore analizzerà e valuterà la causa della rottura. Se questa risulterà essere non imputabile a un difetto di fabbricazione, il Venditore provvederà a fatturare all’acquirente il valore del pezzo nuovo fornito, con le relative spese di trasporto sia per il ritiro del pezzo ritenuto difettoso sia per l’invio del nuovo pezzo.
Non saranno in nessun caso riconosciuti rimborsi per mano d’opera, mezzi di sollevamento, di trasporto o quanto altro si dovesse rendere necessario per la rimozione e la restituzione del pezzo ritenuto difettoso.</span>
            </div>
            
                   <br></br>
            <div style="font-weight:bold;">
                <span> Articolo 12</span>
            </div>
            <div>
                <span>Il mancato rispetto dei pagamenti alle date indicate nel presente contratto, comporta l’immediata sospensione senza necessità di comunicazione alcuna di ogni forma di garanzia nonché di ogni altro obbligo connesso alla vendita, Installazione, Montaggio, Primo avviamento e collaudo e senza che ciò possa costituire motivo di qualsiasi voglia pretesa e/o richiesta da parte dell’acquirente. <br></br>
Alla Puleo altresì riconosciuta la facoltà, concedendo al relativo consenso informato, di comunicare a terzi detentori o destinatari della merce. <br></br>
L’intervenuta sospensione della garanzia e degli eventuali inadempimenti connessi al presente.</span>
            </div>
    
           <br></br>
            <div style="font-weight:bold;">
                <span> Articolo 13</span>
            </div>
            <div>
                <span>L’esecuzione di qualsiasi lavoro preparatorio per l’installazione delle Macchine deve intendersi a completo carico dell’acquirente. <br></br>
Le spese per il posizionamento, l’installazione dell’unità e l’intervento di persone del fornitore, si intendono a carico dell’acquirente salvo diversi accordi pattuiti in contratto.
</span>
            </div>
    
           <br></br>
            <div style="font-weight:bold;">
                <span> Articolo 14</span>
            </div>
            <div>
                <span>Tutte le Macchine fornite dovranno intendersi collaudate presso lo stabilimento del fornitore secondo le modalità dichiarante del fornitore stesso.
</span>
            </div>
    
           <br></br>
            <div style="font-weight:bold;">
                <span> Articolo 15</span>
            </div>
            <div>
                <span>Il fornitore senza obbligo di preavviso alcuno, si riserva il diritto di apportare alle macchine in via di realizzazione le modifiche migliorative che riterrà più opportune. Tutte le descrizioni di dati tecnici indicati nelle offerte circolari, nei preventivi, nei cataloghi, nei prospetti, hanno carattere di indicazioni approssimative. Perciò le descrizioni ed i dati tecnici saranno impegnativi per la Puleo solo se ed in quanto precisate ed espressamente accettate per iscritto.</span>
            </div>
    
           <br></br>
            <div style="font-weight:bold;">
                <span> Articolo 16</span>
            </div>
            <div>
                <span>L’acquirente autorizza il fornitore a richiedere eventuali informazioni commerciali su di esso a terzi e qualora tali informazioni fossero a suo giudizio non soddisfacenti potrà recedere dal contratto restituendo l’anticipo eventualmente percepito. In qualunque momento l’esecuzione della fornitura potrà essere sospesa in caso di mutamento delle condizioni patrimoniali dell’acquirente ai sensi e per gli effetti dell’art. 1461 del c.c.</span>
            </div>
    
           <br></br>
            <div style="font-weight:bold;">
                <span> Articolo 17</span>
            </div>
            <div>
                <span>Per qualsiasi controversia comunque nascente dal presente contratto, anche ove lo stesso dovesse ritenersi risolto o insistente sarà competente l’ufficio del tribunale di Marsala.</span>
            </div>
            
            <br></br>
            <div style="font-weight:bold;">
                <span>L’Acquirente .............................</span>
            </div>
            
            <br></br>
            <div>
                <span>Ai sensi e per gli effetti del secondo coma dell’art. 1341 si approvano espressamente le seguenti clausole, che si dichiara di aver letto in uno con tutte le altre: <br></br>
Punti: 2-4-5-6-7-8-9-10-11-11bis-12-15-16-17</span>
            </div>
            
            <br></br>
            <div style="font-weight:bold;">
                <span t-if="doc.date_order" t-esc="doc.date_order.strftime('%d/%m/%Y')"/>
            </div>
            
            <br></br>
            <div style="font-weight:bold;">
                <span>L’Acquirente .............................</span>
            </div>
            
            <br></br>
            <div style="font-weight:bold;">
                <span>Il Fornitore ...........................</span>
            </div>
            
            
    
    
    
    

          </t>
        </t>

   
   </div>
   
</div>
   

<div class="footer text-center" style="font-size:12px;">
    Pagina
    <span class="page"/>
    di
    <span class="topage"/>
</div>
       
        </t>
    </template>
    
    
    <template id="preventivo_e_ordine_main_template_puleo">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="abc_preventivo_e_ordine_puleo.preventivo_e_ordine_puleo_template_puleo" t-lang="doc.partner_id.lang"/>
                <t t-set="print_with_payments" t-value="True"/>
            </t>
        </t>
    </template>
    
    <!-- Creo il record fattura_imm_e_diff_print_report_puleo, il quale sarebbe il tasto che stampa la fattura da Stampa 
         dalla vista della Fattura Cliente. -->
    
    <record id="preventivo_e_ordine_print_report_puleo" model="ir.actions.report">
        <field name="name">Preventivo/Ordine Puleo</field>
        <field name="model">sale.order</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">abc_preventivo_e_ordine_puleo.preventivo_e_ordine_main_template_puleo</field>
        <field name="report_file">abc_preventivo_e_ordine_puleo.preventivo_e_ordine_main_template_puleo</field>
        <field name="print_report_name">(object.state in ('draft', 'sent') and 'Preventivo - %s' % (object.name)) or 'Ordine - %s' % (object.name)</field>
        <field name="binding_model_id" ref="sale.model_sale_order"/>
        <field name="binding_type">report</field>
        <field name="paperformat_id" ref="abc_preventivo_e_ordine_puleo.preventivo_e_ordine_formato_carta_puleo"/>
    </record>
    
</odoo>
